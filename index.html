<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Week Type • One‑Line Notion Widget</title>
  <style>
    /* —— Visual language: sleek, neutral, Notion-friendly —— */
    :root{
      --bg: transparent;                 /* let Notion page show through */
      --card-bg: rgba(10, 13, 20, .66);  /* dark, semi‑transparent */
      --fg: rgba(243, 244, 246, .96);    /* near‑white on dark */
      --muted: rgba(203, 213, 225, .85); /* slate‑200 */
      --blue: #60a5fa;                   /* light blue → readable on dark */
      --red:  #f43f5e;                   /* rose‑500 → readable on dark */
    }

    html, body { height: 100%; margin:0; padding:0; background: var(--bg); color: var(--fg); }
    body { font: 400 16px Inter, "SF Pro Text", system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", Helvetica, Arial, ui-sans-serif, sans-serif; }

    /* —— Full width strip; narrow card —— */
    .strip { width: 100%; display:grid; place-items:center; }
    .card  { 
      width: min(720px, 100%);           /* narrower and less wide */
      background: var(--card-bg);
      /* no shadow, no border, no radius */
      border: none; border-radius: 0; box-shadow: none;
      padding: 10px 14px;                /* slim height */
      -webkit-backdrop-filter: saturate(140%) blur(4px);
      backdrop-filter: saturate(140%) blur(4px);
    }

    /* —— Single center-aligned line —— */
    .line { 
      display:flex; align-items:center; justify-content:center; gap:.6ch;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      letter-spacing:.1px; line-height:1.25; font-weight:400; /* not bold */
      font-size: clamp(15px, 1.9vw, 18px);
    }
    .sep   { color: var(--muted); }
    .tri   { font-size: 1.05em; line-height:1; transform: translateY(-.5px); }
    .blue  { color: var(--blue); }
    .red   { color: var(--red); }
  </style>
</head>
<body>
  <div class="strip">
    <div class="card">
      <div id="line" class="line" aria-live="polite">—</div>
    </div>
  </div>

  <script>
    // —— Config ——
    // Week 1 start (ideally a Monday). Override via ?start=YYYY-MM-DD
    const DEFAULT_START = '2025-09-01';
    const qs = new URLSearchParams(location.search);
    const START = qs.get('start') || DEFAULT_START;

    function toLocalDate(ymd){
      const [y,m,d] = (ymd||'').split('-').map(Number);
      return new Date(y||1970, (m||1)-1, d||1, 0,0,0,0);
    }
    function mondayOf(d){
      const x = new Date(d.getFullYear(), d.getMonth(), d.getDate());
      const day = (x.getDay()+6)%7; // Mon=0..Sun=6
      x.setDate(x.getDate() - day);
      x.setHours(0,0,0,0);
      return x;
    }
    function weekIndex(start, today){
      const s = mondayOf(start); const t = mondayOf(today);
      const days = Math.round((t - s) / 86400000);
      return Math.floor(days/7) + 1; // start week is 1
    }

    function render(){
      const start = toLocalDate(START);
      const today = new Date();
      let w = weekIndex(start, today); if (!isFinite(w) || w < 1) w = 1;
      const even = (w % 2 === 0);

      const dir  = even ? 'lower' : 'upper';
      const par  = even ? 'even'  : 'odd';
      const triC = even ? 'blue'  : 'red';
      const tri  = even ? '▼'     : '▲';

      const line = `${dir} <span class="sep">•</span> ${par} <span class="sep">•</span> <span class="tri ${triC}">${tri}</span>`;
      document.getElementById('line').innerHTML = line;
    }

    render();
    setInterval(render, 60*60*1000); // refresh hourly
  </script>
</body>
</html>
